#!/usr/bin/env python3

import sys
import math

def read_test_file(file_name):
    """Function to read numbers from file: one on each line"""

    with open(file_name, "r", encoding="utf-8") as file:
        lines = file.readlines()

    number_to_factor = []

    for line in lines:
        line = line.strip()
        if not line:
            continue
        try:
            number = int(line)
            if number <= 1:
                raise ValueError
            number_to_factor.append(number)
        except ValueError:
            print("Invalid input: '{}' is not a natural number".format(line))

    return number_to_factor

def is_perfect_square(n):
    """
    Returns True if n is a perfect square, False otherwise.
    """
    # If the square of the integer square root of n is equal to n, then n is a perfect square
    return math.isqrt(n) ** 2 == n

def find_numbers(n):
    """Function to find factors of current number"""

    last_digit = n % 10
    if last_digit == 0:
        start_range = 2
    elif last_digit % 2 == 0:
        start_range = 2
    elif last_digit == 5:
        start_range = 5
    elif last_digit == 9:
        if n % 3 == 0:
            start_range = 3
        elif is_perfect_square(n):
            start_range = math.isqrt(n)
        else:
            start_range = 1
    else:
        start_range = last_digit
    for i in range(start_range, int(math.sqrt(n)) + 1):
        if n % i == 0:
            print("{}={}*{}".format(n, n // i, i))
            break
    else:
        print("{}={}*1".format(n, n))

def factors(ls):
    """Function to iterate between numbers in file"""

    for i in ls:
        find_numbers(i)

if len(sys.argv) == 2:
    factors(read_test_file(sys.argv[1]))

